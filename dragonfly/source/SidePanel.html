<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='global-property-'>/**
</span> * 侧边面板
 * 
 * @ignore
 * @author Ricky
 */
define(function (require) {
    var _ = require('underscore').noConflict(),
        base = require('base/base'),
        Widget = require('Widget');
    
    var tpl = [
        '&lt;div class=&quot;df-mask&quot;&gt;&lt;/div&gt;',
        '&lt;div class=&quot;df-sidepanel&quot;&gt;',
            '&lt;div class=&quot;df-sidepanel-margin&quot;&gt;&lt;/div&gt;',
            '&lt;div class=&quot;df-sidepanel-body&quot;&gt;',
                '&lt;h1&gt;&lt;%= title %&gt;&lt;/h1&gt;',
                '&lt;div class=&quot;df-sidepanel-content&quot;&gt;&lt;%= content %&gt;&lt;/div&gt;',
                '&lt;div class=&quot;bottom&quot;&gt;&lt;/div&gt;',
            '&lt;/div&gt;',
        '&lt;/div&gt;'
    ].join('');
    
<span id='SidePanel-method-constructor'><span id='SidePanel'>    /**
</span></span>     * 侧边面板
     * 
     * @extends Widget
     * @constructor
     * @param {Object} [options] 初始化参数
     * 
     *     @example
     *     //默认参数
     *     {
     *         title: '',      //标题
     *         content: '',    //内容
     *         hidden: false   //渲染后是否隐藏
     *     }
     */
    function SidePanel(options) {
        Widget.call(this, options);
    }
    
    SidePanel.prototype = {
<span id='SidePanel-method-initOptions'>        /**
</span>         * 初始化参数
         * 
         * @param {Object} [options] 初始化参数
         * @protected
         * @override
         */
        initOptions: function(options) {
            this.options = _.extend({
                title: '',
                content: '',
                hidden: false
            }, options || {});
        },
        
<span id='SidePanel-method-initElements'>        /**
</span>         * 创建其他元素
         * 
         * @protected
         * @override
         */
        initElements: function() {
            this.main.style.display = 'none';
            this.main.innerHTML = _.template(tpl)({
                title: this.options.title,
                content: this.options.content
            });
        },
        
<span id='SidePanel-method-initPainters'>        /**
</span>         * 初始化绘制函数
         * 
         * @protected
         * @override
         */
        initPainters: function() {
            this.painters = {
                hidden: function(hidden) {
                    var mask = this.main.firstChild;
                        panel = this.main.lastChild;
                        panelBody = panel.lastChild;
                    if (!hidden) {
                        if (base.badie) {
                            document.body.parentNode.style.overflow = 'visible';
                        }
                        document.body.style.overflow = 'hidden';
                        
                        var scrollTop = Math.max(document.body.scrollTop, document.documentElement.scrollTop);
                        mask.style.top = panel.style.top = scrollTop + 'px';
                        
                        this.main.style.display = 'block';
                        panel.style.left = 0; //TODO:动画
                        
                        if (!base.badie) {
                            panelBody.scrollTop = 0;
                        }
                    } else {
                        panel.style.left = '100%'; //TODO:动画
                        this.main.style.display = 'none';
                        document.body.style.overflow = 'visible';
                        if (base.badie) {
                            document.body.parentNode.style.overflow = 'auto';
                        }
                    }
                }
            };
        }
    };
    
    base.inherit(SidePanel, Widget);
    
    return SidePanel;
});
</pre>
</body>
</html>
